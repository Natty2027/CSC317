<!DOCTYPE html>
<html lang="en" data-theme="ff">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>iOS-Style Calculator</title>
  <!-- Base calculator styles -->
  <link rel="stylesheet" href="styles/calculator.css">
  <!-- Dynamic theme stylesheet -->
  <link id="theme-link" rel="stylesheet" href="styles/ff-theme.css">
</head>
<body>
  <header class="theme-switcher">
    <button id="theme-switcher-button" aria-pressed="false">Switch Theme</button>
  </header>

  <main>
    <section aria-labelledby="calc-title">
      <h1 id="calc-title" class="visually-hidden">Calculator</h1>
      <div class="calculator" id="calculator" role="application" aria-label="Calculator">
        <div class="display" id="display" role="status" aria-live="polite">
          <span id="memory-indicator" class="memory-indicator" aria-hidden="true">M</span>
          <span id="current-value">0</span>
        </div>

        <form class="buttons" aria-describedby="button-instructions">
          <p id="button-instructions" class="visually-hidden">
            Use the buttons to perform calculations. Memory buttons: M+, M-, MR, MC. Operators: ÷, ×, −, +, =.
          </p>

          <fieldset>
            <legend>Memory functions</legend>
            <button type="button" class="btn ff-gray" data-action="memory-add" aria-label="Memory add">M+</button>
            <button type="button" class="btn ff-gray" data-action="memory-subtract" aria-label="Memory subtract">M–</button>
            <button type="button" class="btn ff-gray" data-action="memory-recall" aria-label="Memory recall">MR</button>
            <button type="button" class="btn ff-gray" data-action="memory-clear" aria-label="Memory clear">MC</button>
          </fieldset>

          <fieldset>
            <legend>Operations</legend>
            <button type="button" class="btn ff-gray" data-action="clear" aria-label="All clear">AC</button>
            <button type="button" class="btn ff-gray" data-action="sign" aria-label="Toggle sign">+ / −</button>
            <button type="button" class="btn ff-gray" data-action="percent" aria-label="Percent">%</button>
            <button type="button" class="btn ff-orange" data-action="operator" data-value="/" aria-label="Divide">÷</button>
          </fieldset>

          <fieldset>
            <legend>Digits and operators</legend>
            <button type="button" class="btn ff-dark" data-value="7">7</button>
            <button type="button" class="btn ff-dark" data-value="8">8</button>
            <button type="button" class="btn ff-dark" data-value="9">9</button>
            <button type="button" class="btn ff-orange" data-action="operator" data-value="*" aria-label="Multiply">×</button>

            <button type="button" class="btn ff-dark" data-value="4">4</button>
            <button type="button" class="btn ff-dark" data-value="5">5</button>
            <button type="button" class="btn ff-dark" data-value="6">6</button>
            <button type="button" class="btn ff-orange" data-action="operator" data-value="-" aria-label="Subtract">−</button>

            <button type="button" class="btn ff-dark" data-value="1">1</button>
            <button type="button" class="btn ff-dark" data-value="2">2</button>
            <button type="button" class="btn ff-dark" data-value="3">3</button>
            <button type="button" class="btn ff-orange" data-action="operator" data-value="+" aria-label="Add">+</button>

            <button type="button" class="btn ff-dark ff-wide" data-value="0">0</button>
            <button type="button" class="btn ff-dark" data-value="." aria-label="Decimal point">.</button>
            <button type="button" class="btn ff-orange" data-action="equals" aria-label="Equals">=</button>
          </fieldset>
        </form>
      </div>
    </section>

    <nav class="back-link">
      <button id="back-button" class="btn ff-gray" aria-label="Go back to portfolio">← Back to Portfolio</button>
    </nav>
  </main>

  <script src="script/calculator.js"></script>
  <script>
    // Theme persistence & toggle
    (function() {
      const themeLink = document.getElementById('theme-link');
      const switcher = document.getElementById('theme-switcher-button');
      const root = document.documentElement;
      const stored = localStorage.getItem('theme') || 'ff';
      root.setAttribute('data-theme', stored);
      themeLink.href = `styles/${stored}-theme.css`;
      switcher.setAttribute('aria-pressed', 'false');

      switcher.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'ff' ? 'dd' : 'ff';
        root.setAttribute('data-theme', next);
        themeLink.href = `styles/${next}-theme.css`;
        localStorage.setItem('theme', next);
      });
    })();

    // Back-button behavior
    document.getElementById('back-button').addEventListener('click', e => {
      if (history.length > 1) {
        history.back();
      } else {
        window.location.href = 'index.html';
      }
    });
  </script>
</body>
</html>


